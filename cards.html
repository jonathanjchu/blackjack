<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Blackjack</title>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <link href="styles.css" rel="stylesheet" />
    <script src="cards.js" type="text/javascript"></script>
</head>

<body>

    <div id="container">

        <div class="col" id="dealer">
            <h3>Dealer</h3>
            <div id="dealer-hand"></div>
        </div>

        <div class="col" id="players">

        </div>

        <div class="col" id="restart">
            <button class="btn btn-danger" onclick="resetGame();">Restart</button>
        </div>
    </div>

    <script src="draw.js" type="text/javascript"></script>
    <script src="blackjack.js" type="text/javascript"></script>
    <script>


        function clickHitPlayer(name) {
            player = game.findPlayer(name);
            game.hit(player);
            drawPlayerHand(player);

            if (!game.areAnyPlayersStillIn())
                showEndGame()
        }

        function clickStay(name) {
            player = game.findPlayer(name);
            game.stay(player);
            drawPlayerHand(player);

            if (!game.areAnyPlayersStillIn())
                showEndGame()
        }

        function clickSplit(name) {
            game.split(game.findPlayer(name));

            $("#players").empty();
            game.getListOfPlayers().forEach(function (player) {
                drawPlayer(player);
                drawPlayerHand(player);
                showPlayerControls(player);
            })
        }

        function showEndGame() {
            showRestartBtn();
            drawRevealedDealerHand(game.getDealer());
        }

        function resetGame() {
            game.newGame();

            $("#btn-split").css("visibility", "hidden");
            $("#players").empty();

            game.getListOfPlayers().forEach(function (player) {
                drawPlayer(player);
                drawPlayerHand(player);
                showPlayerControls(player);
            })

            if (game.canSplit()) {
                showSplit(game.getListOfPlayers()[0]);
            }

            hideRestartBtn();
            drawHiddenDealerHand(game.getDealer());
        }

        var game = new Blackjack();
        resetGame();

    </script>
</body>

</html>